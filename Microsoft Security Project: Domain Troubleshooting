Project Mission - Windows Domain Troubleshooting
Handle common  scenarios involving various elements in a domain environment; troubleshoot the issues and think of ways to reconfigure and resolve them properly.

Scenario 1: Domain Name Issue 
(troubleshoot why a computer cannot join a domain)
You try to add a new employee computer (Client7) to the domain. Although there is a connection (ping) between the new computer and the DC, you cannot add it to the domain. Find out what is happening. The employee must start working on a project immediately.

Log on locally to Client7: 
Control Panel > System and Security > System > Change settings > Change > Enter Domain: cyber.com >> “An Active Directory Domain Controller (AD DC) for the domain “cyber.com” could not be contacted.”

Nslookup brought up misconfigured server IP:
Control Panel > Network and Internet > Network and Sharing Center > Change adapter settings >  Local Area Connection Properties > IPv4 >> Change DNS server address to correct IP 10.0.0.1

Reattempted joining domain: 
Input credentials > username: Administrator password: Pa$$w0rd >> “Welcome to the cyber.com domain.”

Scenario 2: DHCP Server
(troubleshoot why a computer fails to perform DNS queries)
Barry is logged into Client10. He says that he cannot reach the resources of the domain (Cyber.com) by their names, but when he tries to use their IP addresses, it works. You know that one of the junior system admins configured the DHCP server recently. 

Log on to Barry: 
Cmd > ping server1 >> “Sent = 4, Received = 0”
Cmd > ipconfig /all >> “DHCP Enabled”
Cmd > nslookup >> misconfigured DNS Server IP 10.0.0.11

Log on to Server 1: 
Server Manager > Tools > DHCP > server1.cyber.com > IPv4 >  Scope > Reservations > DNS Server IP reconfigured 10.0.0.1

Go back to Barry: 
Cmd > ipconfig /release > ipconfig /renew > ping server1 >> “Sent = 4, Received = 4”

Scenario 3: Permission Share Issue
(troubleshoot why a user cannot move files to a shared folder)
While working on her computer(Client7), Jane, an employee in the sales department, tries to save a document in the shared folder Sales(\\server1\Sales). She opens Sales from a mapped folder drive in File Explorer and can view and open existing documents but receives an error when she tries to save a new one. Other members of the sales group can save documents.

Log on to Jane: 
Access shared folder > //server1/Sales >> not able to create files in folder “You need permission to perform this action”

Log on to Server 1: 
File Manager > Sales > Properties > Security > Advanced Security Settings for Sales > Domain Users has Full control access + Sales_Group has Modify access + Temp_Users has Read & execute access >> Find out if Jane is in group with correct permissions

Server Manager > Tools > Active Directory Users and Computers > Sales > Jane > Member of > Domain Users + Sales_Group + Temp_Users > Temp_Users has the most strict rules preventing Jane from creating files in Sales folder >> Remove Temp_Users from Jane

Logout and Log on to Jane:
Access shared folder > //server1/Sales >> can now save files to folder

Scenario 4: Shared Folder File Permission Issue
(troubleshoot why a user cannot copy a .doc file to a shared folder)
While working on his computer (Client10), John, a member of the sales department, complains about an error he receives when he tries to move a file (Report.doc) from his desktop to the shared sales folder. The file must be uploaded to the folder today. Help him as soon as possible. 

Log on to John:
File Explorer > Sales (\\server1) (Z:) > drag Report.doc into shared folder > Destination Folder Access Denied “You need permission to perform this action” > tries to move .txt file to folder > allowed >> indicates permission issue with specific type of file

Log on to Server1: 
Server Manager > Tools > File Server Resource Manager > File Screening Management > File Screens > C:\Sales Active Block Office Files >> Delete Block

Back to John:
Drag Report.doc into shared folder >> Success

Scenario 5: Security Issue
(fix a security issue mentioned in a report generated by the penetration testing team)
In a penetration test report you receive, one of the recommendations is to change the administrator’s default name to make it more difficult for an attacker to guess both the name and the password.

Log on to Server1:
Server Manager > Tools > Group Policy Management > Default Domain Policy > Edit > Computer Configuration > Policies > Windows Settings > Security Settings > Local Policies > Security Options > Accounts: Rename administrator account >> Define this policy setting: Sunny 

Cmd >> gpupdate /force

Sign out of Administrator >> no longer able to sign into Administrator > sign in to Sunny 

Scenario 6: User Access Issue 
(troubleshoot why a user cannot log into his computer)
A user named Martin complained this morning that he cannot log into his computer (Client10). Yesterday, he had no problem. 
Note: You know that one of the junior system admins was working on the policy last night. 

Log on to Martin:
Client7 > can log on > Client10 > cannot log on >> indicates policy misconfiguration

Log on to Server 1:
Server Manager > Tools > Group Policy Management > Win 10 Clients > General > Settings > Policies > Windows Settings > Security Settings > Local Policies/User Rights Assignment > Deny log on locally CYBER\Martin 

Server Manager > Tools > Group Policy Management > Win 10 Clients > Edit > Computer Configuration > Policies > Windows Settings > Security Settings > Local Policies > User Rights Assignment > Deny log on locally >> Remove CYBER\Martin 

Back to Client10:
Log on to John > PowerShell > gpupdate /force > logout of John >> Log on to Martin

Scenario 7: DHCP Scope Configuration Issue
(troubleshoot why the DHCP creates traffic on the network too frequently)
After running a network diagnostic, you notice that the network has too many DHCP requests (DORA process), and the IP addresses of the clients change too often. >> indicates lease is too short 

Log on to Server1:
Server Manager > Tools > DHCP > server1.cyber.com > IPv4 > Scope > Properties >> Change lease duration from 1 hr to 7 days 

Scenario 8: Security Issue
(troubleshoot a security issue)
The penetration testing team can brute-force and guess some user passwords. The team suggests that the company use the following settings: 
• Passwords must change after 30 days. 
• The length of a password must be at least 10 characters. 
• After five invalid logon attempts, the account should be locked for at least 30 minutes. 

Log on to Server1:
Server Manager > Tools > Group Policy Management > Default Domain Policy > Edit > Computer Configuration > Policies > Windows Settings > Security Settings > Account Policies > Password Policy >> Enforce password history Properties: 4 passwords remembered >> Maximum password age Properties: Password will expire in 30 days >> Minimum password length Properties: Password must be at least 7 characters >>

Account Lockout Policy >> Account lockout threshold Properties: 5 invalid logon attempts

Log on to Client7:
PowerShell >> gpupdate /force 

Scenario 9: Account Issue
(troubleshoot why a user cannot log into her computer)
Dona from the marketing department receives an error when she tries to log into her computer. The error occurs even when she tries to enter from other computers. 

Log on to Dona:
The user’s account has expired

Log on to Server1:
Server Manager > Tools > Active Directory Users and Computers > Cyber.com > Marketing > Dona > Properties > Account > Account expires End of: extend a year

Back to Dona:
Login successful

Scenario 10: Shared Inheritance Issue
(fix a security issue caused by a shared folder with incorrect permissions)
The penetration testing team found sensitive information shared across the organization using a shared folder called Public. In Public, there is a folder called Managers, which includes sensitive information that anyone can access. Only members of the Managers group should have access to the information. Managers is located in \\server1\public. >> indicates inheritance of permissions from the parent folder Public

Log on to Jane (Client7):
File Explorer > \\server1\Public > Managers >> can open files in folder

Log on to Server1:
File Explorer > Local Disk (C:) > Public > Properties > Security > Advanced > Disable inheritance > Convert inherited permissions into explicit permissions on this object. >> Remove Users (CYBER\Users) 

Back to Jane:
File Explorer > \\server1\Public > Managers >> Windows cannot access \\server1\Public\Managers

Scenario 11: GPO Misconfiguration
(troubleshoot why Windows Defender cannot be turned on)
In Client10, the Windows Defender is turned off and cannot be turned back on.

Log on to Client10:
Windows Defender >> “This app is turned off by group policy”

PowerShell > gpresult /r > Applied Group Policy Objects >> General + Default Domain Policy

Log on to Server1:
Server Manager > Tools > Group Policy Management > Group Policy Objects > General > Edit > Computer Configuration > Policies > Administrative Template > Windows Components > Windows Defender > Turn off Windows Defender > Disable

Back to Client10:
PowerShell >> gpupdate /force

Windows Defender >> can access application
